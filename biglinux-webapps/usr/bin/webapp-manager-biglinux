#!/usr/bin/env bash

#Translation
export TEXTDOMAINDIR="/usr/share/locale"
export TEXTDOMAIN=biglinux-webapps

    declare -g webappspath='/usr/share/bigbashview/bcc/apps/biglinux-webapps'
	declare -g webapps_icon_file='icons/webapp.svg'
	declare -g TITLE="biglinux-webapps"
	declare -g webapps_sub="biglinux-webapps"
	
if pidof webapp-manager-biglinux &>/dev/null;then
    yad --image=emblem-warning --image-on-top --form --width=500 --height=100 --fixed \
    --align=center \
    --text $"O Gerenciador de WebApps BigLinux j치 est치 aberto!" \
    --button=$" Fechar" \
    --center --on-top --borders=20 --title=$"BigLinux WebApps" \
    --window-icon=/usr/share/bigbashview/bcc/apps/biglinux-webapps/icons/webapp.svg
    exit
fi

#Translation
export TEXTDOMAINDIR="/usr/share/locale"
export TEXTDOMAIN=biglinux-webapps

# Criando diret칩rios necess치rios
mkdir -p ~/.bigwebapps
mkdir -p ~/.local/share/icons
mkdir -p ~/.local/share/applications
mkdir -p ~/.local/bin

if [ ! -e ~/.bigwebapps/BROWSER ];then
    /usr/share/bigbashview/bcc/apps/biglinux-webapps/check_browser.sh
fi

COMMON_OPTIONS="QT_QPA_PLATFORM=xcb SDL_VIDEODRIVER=x11 WINIT_UNIX_BACKEND=x11 GDK_BACKEND=x11 bigbashview -n \"$TITLE\" -s 960x620 "
 
 eval "$COMMON_OPTIONS  -p $webapps_sub -d $webappspath index.sh.htm -i $webapps_icon_file"
